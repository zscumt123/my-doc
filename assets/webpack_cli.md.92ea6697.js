import{_ as s,o as a,c as n,Q as p}from"./chunks/framework.38a59c20.js";const e="/my-doc/assets/w_init.e9090d3e.png",l="/my-doc/assets/info.caed8f7c.png",o="/my-doc/assets/validate.f81e2928.png",m=JSON.parse('{"title":"命令行接口(CLI)","description":"","frontmatter":{},"headers":[],"relativePath":"webpack/cli.md","filePath":"webpack/cli.md","lastUpdated":1694070681000}'),c={name:"webpack/cli.md"},t=p('<h1 id="命令行接口-cli" tabindex="-1">命令行接口(CLI) <a class="header-anchor" href="#命令行接口-cli" aria-label="Permalink to &quot;命令行接口(CLI)&quot;">​</a></h1><p>webpack-cli 提供了许多命令来使 webpack 的工作变得更简单,为了更合适且方便地使用配置，可以在 webpack.config.js 中对 webpack 进行配置。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>CLI 中传入的任何参数会在配置文件中映射为对应的参数。</p></div><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-eETpM" id="tab-mqGYlTB" checked="checked"><label for="tab-mqGYlTB">npm</label><input type="radio" name="group-eETpM" id="tab-Qm5ngbV"><label for="tab-Qm5ngbV">yarn</label><input type="radio" name="group-eETpM" id="tab-A2dUPoO"><label for="tab-A2dUPoO">pnpm</label></div><div class="blocks"><div class="language-sh vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack-cli</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--save-dev</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack-cli</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--save-dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack-cli</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">add</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack-cli</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pnpm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack-cli</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pnpm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">add</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack-cli</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><h2 id="命令" tabindex="-1">命令 <a class="header-anchor" href="#命令" aria-label="Permalink to &quot;命令&quot;">​</a></h2><p>默认情况下，webpack 提供了以下命令：</p><h3 id="init" tabindex="-1">init <a class="header-anchor" href="#init" aria-label="Permalink to &quot;init&quot;">​</a></h3><p>init命令用来初始化一个新的webpack项目</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">init</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#032F62;">init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>就会出现如下的选项让你选择：</p><p><img src="'+e+'" alt="init"> 当然，<code>webpack init</code>还有其他的参数，详见<a href="https://github.com/webpack/webpack-cli/blob/master/packages/generators/INIT.md" target="_blank" rel="noreferrer">@webpack-cli/generators</a>,这个npm包就是用来生成<code>webpack</code>项目的</p><h3 id="build命令" tabindex="-1">build命令 <a class="header-anchor" href="#build命令" aria-label="Permalink to &quot;build命令&quot;">​</a></h3><p>build命令是用来构建，输出文件的,类似于下面这样</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./webpack.prod.config.js</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--stats</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">verbose</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./webpack.prod.config.js</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--stats</span><span style="color:#24292E;"> </span><span style="color:#032F62;">verbose</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="info-命令" tabindex="-1">info 命令 <a class="header-anchor" href="#info-命令" aria-label="Permalink to &quot;info 命令&quot;">​</a></h3><p>info命令是用来查看系统信息的</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">info</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">webpack</span><span style="color:#24292E;"> </span><span style="color:#032F62;">info</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+l+'" alt="info"></p><h3 id="configtest命令" tabindex="-1">configtest命令 <a class="header-anchor" href="#configtest命令" aria-label="Permalink to &quot;configtest命令&quot;">​</a></h3><p>configtest 命令是用来校验webpack配置文件的</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configtest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./webpack.config.js</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configtest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./webpack.config.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+o+`" alt="validate"></p><h3 id="serve命令" tabindex="-1">serve命令 <a class="header-anchor" href="#serve命令" aria-label="Permalink to &quot;serve命令&quot;">​</a></h3><p>serve命令是运行<code>webpack-dev-server</code>开发服务器</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">serve</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--static</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--open</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#032F62;">serve</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--static</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--open</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="watch命令" tabindex="-1">watch命令 <a class="header-anchor" href="#watch命令" aria-label="Permalink to &quot;watch命令&quot;">​</a></h3><p>运行 webpack 并且监听文件变化。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">npx webpack watch</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">npx webpack watch</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="environment选项" tabindex="-1">Environment选项 <a class="header-anchor" href="#environment选项" aria-label="Permalink to &quot;Environment选项&quot;">​</a></h2><p>当 webpack 配置导出为函数时，会接收到一个 &quot;environment&quot; 的参数。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">env</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="env设置" tabindex="-1">env设置 <a class="header-anchor" href="#env设置" aria-label="Permalink to &quot;env设置&quot;">​</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#env.production = true</span></span>
<span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--env</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">production</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#env.production = true</span></span>
<span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--env</span><span style="color:#24292E;"> </span><span style="color:#032F62;">production</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以有多种使用方式，如下：</p><table><thead><tr><th>命令</th><th>解析后的结果</th></tr></thead><tbody><tr><td><code>npx webpack --env prod</code></td><td><code>{ prod: true }</code></td></tr><tr><td><code>npx webpack --env platform=app --env production</code></td><td><code>{ platform: &quot;app&quot;, production: true }</code></td></tr><tr><td><code>npx webpack --env foo=bar=app</code></td><td><code>{ foo: &quot;bar=app&quot;}</code></td></tr><tr><td><code>npx webpack --env app.platform=&quot;staging&quot; --env app.name=&quot;test&quot;</code></td><td><code>{ app: { platform: &quot;staging&quot;, name: &quot;test&quot; }}</code></td></tr></tbody></table><p>除了通过<code>--env</code>自定义环境变量，webpack还内置了一些env变量,<code>WEBPACK_SERVE</code>, <code>WEBPACK_BUILD</code>, <code>WEBPACK_WATCH</code>， 假设<code>webpack.config.js</code>如下</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-5npK2" id="tab-5--u1oe" checked="checked"><label for="tab-5--u1oe">WEBPACK_SERVE</label><input type="radio" name="group-5npK2" id="tab-nvNeTA4"><label for="tab-nvNeTA4">WEBPACK_BUILD</label><input type="radio" name="group-5npK2" id="tab-7_VQVKZ"><label for="tab-7_VQVKZ">WEBPACK_WATCH</label></div><div class="blocks"><div class="language-js vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// webpack serve</span></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//{WEBPACK_SERVE: true}</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(env)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// webpack serve</span></span>
<span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;">(</span><span style="color:#E36209;">env</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//{WEBPACK_SERVE: true}</span></span>
<span class="line"><span style="color:#24292E;">  console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(env)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// webpack build</span></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//{WEBPACK_BUILD: true}</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(env)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// webpack build</span></span>
<span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;">(</span><span style="color:#E36209;">env</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//{WEBPACK_BUILD: true}</span></span>
<span class="line"><span style="color:#24292E;">  console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(env)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// webpack watch</span></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">env</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//{WEBPACK_WATCH: true}</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(env)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// webpack watch</span></span>
<span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;">(</span><span style="color:#E36209;">env</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//{WEBPACK_WATCH: true}</span></span>
<span class="line"><span style="color:#24292E;">  console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(env)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div><h3 id="node-env-设置" tabindex="-1">node-env 设置 <a class="header-anchor" href="#node-env-设置" aria-label="Permalink to &quot;node-env 设置&quot;">​</a></h3><p>可以使用 --node-env 选项来设置 <code>p<wbr>rocess.env.NODE_ENV</code></p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--node-env</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">production</span><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#6A737D;"># p<wbr>rocess.env.NODE_ENV = &#39;production&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--node-env</span><span style="color:#24292E;"> </span><span style="color:#032F62;">production</span><span style="color:#24292E;">   </span></span>
<span class="line"><span style="color:#6A737D;"># p<wbr>rocess.env.NODE_ENV = &#39;production&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>如果不明确的设置 mode，mode 选项的值会被 --node-env 覆盖。 例如 --node-env production 时，会把 p<wbr>rocess.env.NODE_ENV 和 mode 均设置为 &#39;production&#39;。</p></div><h3 id="cli中的环境变量" tabindex="-1">cli中的环境变量 <a class="header-anchor" href="#cli中的环境变量" aria-label="Permalink to &quot;cli中的环境变量&quot;">​</a></h3><ul><li><code>WEBPACK_CLI_SKIP_IMPORT_LOCAL</code> 设置为 true 时将不会使用 webpack-cli 本地实例</li><li><code>WEBPACK_CLI_FORCE_LOAD_ESM_CONFIG</code> 设置为 true 则强制加载 ESM 配置</li><li><code>WEBPACK_PACKAGE</code> 在 CLI 中使用自定义 webpack 版本。</li><li><code>WEBPACK_DEV_SERVER_PACKAGE</code> 在 CLI 中使用自定义 webpack-dev-server 版本</li><li><code>WEBPACK_CLI_HELP_WIDTH</code> 用于帮助输出的自定义宽度。 比如，你可以在运行<code>webpack</code>命令时指定不同的版本</li></ul><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;webpack&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;^4.0.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;webpack-5&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;npm:webpack@^5.32.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;webpack-cli&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;^4.5.0&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;webpack&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;^4.0.0&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;webpack-5&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;npm:webpack@^5.32.0&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;webpack-cli&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;^4.5.0&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当你使用v4.0.0时候</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>当你使用v5的时候</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">WEBPACK_PACKAGE</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">webpack-5</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">webpack</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">WEBPACK_PACKAGE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">webpack-5</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">webpack</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,49),r=[t];function i(d,E,y,b,u,h){return a(),n("div",null,r)}const F=s(c,[["render",i]]);export{m as __pageData,F as default};
